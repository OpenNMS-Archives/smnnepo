<features xmlns="http://karaf.apache.org/xmlns/features/v1.0.0" name="opennms-sampler-${project.version}">    

    <!-- Apache Camel features -->
    <repository>mvn:org.apache.camel.karaf/apache-camel/${camelVersion}/xml/features</repository>

    <!-- Apache ActiveMQ features -->
    <repository>mvn:org.apache.activemq/activemq-karaf/${activemqVersion}/xml/features</repository>

    <!-- OpenNMS features -->
    <repository>mvn:org.opennms.karaf/opennms/${project.version}/xml/features</repository>

    <!-- Newts features -->
    <repository>mvn:org.opennms.newts/newts-karaf/${newtsVersion}/xml/features</repository>

    <!-- Minion features -->
    <repository>mvn:org.opennms.netmgt.sample/karaf/${project.version}/xml/minion</repository>

    <!-- Sampler features -->

    <!-- Sampler API -->
    <feature name="sample-api" description="OpenNMS :: Features :: Sampler :: API" version="${project.version}">
      <feature version="[1.9.0,2.0)">commons-codec</feature>
      <feature>camel-core</feature>
      <feature>opennms-core</feature>
      <feature>opennms-core-camel</feature>
      <feature>opennms-config-jaxb</feature>
      <bundle>mvn:org.opennms.netmgt.sample/sample-api/${project.version}</bundle>
    </feature>

    <!-- Sampler SNMP Config Model -->
    <feature name="sampler-config-snmp" description="OpenNMS :: Features :: Sampler :: SNMP Configuration" version="${project.version}">
      <feature version="[1.9.0,2.0)">commons-codec</feature>
      <feature>camel-blueprint</feature>
      <feature>camel-jaxb</feature>
      <feature>camel-http</feature>
      <feature>opennms-snmp</feature>
      <feature>sample-api</feature>
      <bundle>mvn:org.opennms.core/org.opennms.core.camel/${project.version}</bundle>
      <bundle>mvn:org.opennms.netmgt.sample/sampler-config-snmp/${project.version}</bundle>
    </feature>

    <!-- Sampler -->
    <feature name="opennms-sampler" description="OpenNMS :: Features :: Sampler" version="${project.version}">
      <feature>activemq-camel</feature>
      <feature>camel-core</feature>
      <feature>camel-blueprint</feature>
      <feature>camel-http</feature>
      <feature>camel-jaxb</feature>
      <feature>guava</feature>
      <feature>newts-api</feature>

      <feature>opennms-core</feature>
      <feature>opennms-collection-api</feature>
      <feature>opennms-dao-api</feature>

      <feature>sample-api</feature>
      <feature>sampler-config-snmp</feature>

      <bundle dependency="true">mvn:org.opennms.core.jmx/org.opennms.core.jmx.api/${project.version}</bundle>
      <bundle dependency="true">mvn:org.opennms.core.jmx/org.opennms.core.jmx.impl/${project.version}</bundle>

      <bundle>mvn:org.opennms.features.collection/org.opennms.features.collection.sampler/${project.version}</bundle>
      <bundle>mvn:org.opennms.features/org.opennms.features.sampler/${project.version}</bundle>
    </feature>

    <!-- Config -->
    <feature name="sampler-config" description="OpenNMS :: Features :: Sampler :: Configuration" version="${project.version}">
      <feature>camel-blueprint</feature>
      <feature>opennms-sampler</feature>
      <bundle>blueprint:mvn:org.opennms.features/org.opennms.features.sampler/${project.version}/xml/blueprint-sampler-config</bundle>
    </feature>

    <!-- Scheduler -->
    <feature name="sampler-scheduler" description="OpenNMS :: Features :: Sampler :: Scheduler" version="${project.version}">
      <feature>camel-blueprint</feature>
      <feature>opennms-sampler</feature>
      <bundle>blueprint:mvn:org.opennms.features/org.opennms.features.sampler/${project.version}/xml/blueprint-sampler-scheduler</bundle>
    </feature>

    <!-- SNMP collector -->
    <feature name="sampler-snmp" description="OpenNMS :: Features :: Sampler :: SNMP Collector" version="${project.version}">
      <feature>camel-blueprint</feature>
      <feature>opennms-sampler</feature>
      <bundle>blueprint:mvn:org.opennms.features/org.opennms.features.sampler/${project.version}/xml/blueprint-sampler-snmp</bundle>
    </feature>

    <!-- JMX collector -->
    <feature name="sampler-jmx" description="OpenNMS :: Features :: Sampler :: JMX Collector" version="${project.version}">
      <feature>camel-blueprint</feature>
      <feature>opennms-sampler</feature>
      <bundle>blueprint:mvn:org.opennms.features/org.opennms.features.sampler/${project.version}/xml/blueprint-sampler-jmx</bundle>
    </feature>

    <feature name="sample-graphs" description="OpenNMS :: Features :: Sampler :: Graphing" version="${project.version}">
      <feature>sample-api</feature>
      <feature>sample-config-snmp</feature>
      <feature>http-whiteboard</feature>
      <feature>cxf-jaxrs</feature>
      <bundle>mvn:org.opennms.netmgt.sample/sample-graphs/${project.version}</bundle>
    </feature>

    <feature name="sample-storage-rrd" description="OpenNMS :: Features :: Sampler :: Storage :: RRD" version="${project.version}">
      <feature>camel-blueprint</feature>
      <feature>opennms-sampler</feature>
      <bundle>blueprint:mvn:org.opennms.features/org.opennms.features.sampler/${project.version}/xml/blueprint-sampler-storage-rrd</bundle>
    </feature>

    <feature name="sample-storage-newts" description="OpenNMS :: Features :: Sampler :: Storage :: Newts" version="${project.version}">
      <feature>camel-blueprint</feature>
      <feature>opennms-sampler</feature>
      <bundle>blueprint:mvn:org.opennms.features/org.opennms.features.sampler/${project.version}/xml/blueprint-sampler-storage-newts</bundle>
    </feature>

    <!-- File sample storage -->
    <feature name="sample-storage-file" description="OpenNMS :: Features :: Sampler :: Storage :: File" version="${project.version}">
      <feature>camel-blueprint</feature>
      <feature>opennms-sampler</feature>
      <bundle>blueprint:mvn:org.opennms.features/org.opennms.features.sampler/${project.version}/xml/blueprint-sampler-storage-file</bundle>
    </feature>

    <!-- XML sample storage -->
    <feature name="sample-storage-xml" description="OpenNMS :: Features :: Sampler :: Storage :: XML" version="${project.version}">
      <feature>camel-blueprint</feature>
      <feature>opennms-sampler</feature>
      <bundle>blueprint:mvn:org.opennms.features/org.opennms.features.sampler/${project.version}/xml/blueprint-sampler-storage-xml</bundle>
    </feature>

    <!-- ActiveMQ sample dispatcher -->
    <feature name="sample-dispatch-activemq" description="OpenNMS :: Features :: Sampler :: Minion Dispatcher" version="${project.version}">
      <feature>camel-blueprint</feature>
      <feature>opennms-sampler</feature>
      <bundle>blueprint:mvn:org.opennms.features/org.opennms.features.sampler/${project.version}/xml/blueprint-sampler-sampleset-minion</bundle>
    </feature>

    <!-- ActiveMQ sample receiver -->
    <feature name="sample-receiver-activemq" description="OpenNMS :: Features :: Sampler :: Dominion Receiver" version="${project.version}">
      <feature>camel-blueprint</feature>
      <feature>opennms-sampler</feature>
      <bundle>blueprint:mvn:org.opennms.features/org.opennms.features.sampler/${project.version}/xml/blueprint-sampler-sampleset-dominion</bundle>
    </feature>

    <!-- Integration features -->

    <feature name="sampler-with-file-storage" description="OpenNMS :: Features :: Sampler :: Integration :: Sampler with file storage" version="${project.version}">
      <feature>camel-blueprint</feature>
      <!-- Pull in the collection configurations -->
      <feature>sampler-config</feature>
      <!-- Provide a scheduler to execute the sampler tasks -->
      <feature>sampler-scheduler</feature>
      <!-- Provide an SNMP sampler implementation -->
      <feature>sampler-snmp</feature>
      <!-- Provide a JMX sampler implementation -->
      <feature>sampler-jmx</feature>
      <!-- Store samples in a file -->
      <feature>sample-storage-file</feature>
    </feature>

    <feature name="sampler-with-xml-storage" description="OpenNMS :: Features :: Sampler :: Integration :: Sampler with XML storage" version="${project.version}">
      <feature>camel-blueprint</feature>
      <!-- Pull in the collection configurations -->
      <feature>sampler-config</feature>
      <!-- Provide a scheduler to execute the sampler tasks -->
      <feature>sampler-scheduler</feature>
      <!-- Provide an SNMP sampler implementation -->
      <feature>sampler-snmp</feature>
      <!-- Provide a JMX sampler implementation -->
      <feature>sampler-jmx</feature>
      <!-- Store samples in an XML file -->
      <feature>sample-storage-xml</feature>
    </feature>

    <feature name="sampler-with-rrd-storage" description="OpenNMS :: Features :: Sampler :: Integration :: Sampler with RRD storage" version="${project.version}">
      <feature>camel-blueprint</feature>
      <!-- Pull in the collection configurations -->
      <feature>sampler-config</feature>
      <!-- Provide a scheduler to execute the sampler tasks -->
      <feature>sampler-scheduler</feature>
      <!-- Provide an SNMP sampler implementation -->
      <feature>sampler-snmp</feature>
      <!-- Provide a JMX sampler implementation -->
      <feature>sampler-jmx</feature>
      <!-- Store samples in RRD files -->
      <feature>sample-storage-rrd</feature>
    </feature>

    <feature name="sampler-with-activemq-export" description="OpenNMS :: Features :: Sampler :: Integration :: Sampler with ActiveMQ export" version="${project.version}">
      <feature>camel-blueprint</feature>
      <!-- Pull in the collection configurations -->
      <feature>sampler-config</feature>
      <!-- Provide a scheduler to execute the sampler tasks -->
      <feature>sampler-scheduler</feature>
      <!-- Provide an SNMP sampler implementation -->
      <feature>sampler-snmp</feature>
      <!-- Provide a JMX sampler implementation -->
      <feature>sampler-jmx</feature>
      <!-- Export samples over ActiveMQ -->
      <feature>sample-dispatch-activemq</feature>
    </feature>

</features>
